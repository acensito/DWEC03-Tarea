<!DOCTYPE html>
<!--
    CODIGO CREADO BAJO LICENCIA CREATIVE COMMONS
    Reconocimiento - NoComercial - CompartirIgual (by-nc-sa):
    No se permite un uso comercial de la obra original ni de las posibles obras
    derivadas, la distribución de las cuales se debe hacer con una licencia igual
    a la que regula la obra original.
-->

<html>
<head>
    <meta charset="utf-8">
    <title>DWEC - Tarea 3 - Felipe Rodríguez Gutiérrez</title>
    <link type="text/css" href="estilos.css" rel="stylesheet" />
    <script type="text/javascript" src="clases.js"></script>
    <script type="text/javascript" src="dni.js"></script>
</head>

<body>
    <nav><img src="img/logo.png" alt="Mercamona"></nav>
    <script>
        //Creamos objetos productos diversos
        var mora = new Producto ("Mora", 2, true);
        var patata = new Producto ("Patata", 1, false);
        var pipas = new Producto ("Pipas", 2, false);
        var chicharo = new Producto ("Chicharo", 3, true);
        var naranja = new Producto ("Naranja", 1, true);
        var lejia = new Producto ("Lejía", 2, false);
        var yogur = new Producto ("Yogur", 4,true);
    </script>
    
    <h2>Mostrando las propiedades de algunos productos</h2>
    <script>
        //Mostramos las propiedades de algunos de los objetos
        document.write(patata);
        document.write(naranja);
        document.write(lejia);
        document.write(mora);
        
        //Creamos varios objetos clientes
        var cliente1 = new Cliente("Silvestre", "Repollo", "12345678Z", "Plaza del platanero 4", "123456");
        var cliente2 = new Cliente("Cara", "Anchoa", "98765421V", "Calle Luis Ortiz Muñoz 3, 2ºA", "654321");
        var cliente3 = new Cliente("Hipolito", "Rincón", "22222222J", "Calle Perdiz 2-Bajo", "abcabc");
    </script>
    
    <h2>Mostrando las propiedades de los clientes</h2>
    <script>
        //Mostramos las propiedades de los clientes
        document.write(cliente1);
        document.write(cliente2);
        document.write(cliente3);
        
        //Creando un objeto carro y lo cargamos de productos
        var carro1 = new  Cesta(cliente1, "Barriada El Vacie Chabola 7-A"); //Lo pide para su hermana.
            carro1.addProducto(mora);
            carro1.addProducto(pipas);
            carro1.addProducto(patata);
            carro1.addProducto(chicharo);
            carro1.addProducto(lejia);
        
        var carro2 = new Cesta(cliente2, false);
            carro2.addProducto(patata);
            carro2.addProducto(lejia);
        
        var carro3 = new Cesta(cliente3,false);
    </script>
    
    <h2>Mostrando los carros de la compra</h2>
    <script>
        document.write(carro1);
        document.write(carro2);
        document.write(carro3);
    </script>
    
    <h2>Solicitando datos de un nuevo cliente por prompt</h2>
    <script>
        //Solicitaremos cada dato hasta que se defina para calidad.
        //No será válido campos nulos, vacios o sin definir.
        do{
            var nombre = prompt("Introduzca un nombre");
        } while ((nombre == undefined) || (nombre == "") || (nombre == null));
        
        do{
            var apellido = prompt("Introduzca los apellidos");
        } while ((nombre == undefined) || (apellido == "") || (apellido == null));
        
        //El documento de identidad se solicitará hasta que sea ingresado uno válido
        //Se usará el validador de la funcion calcularNIF de dni.js
        do{
            var documento = prompt("Introduzca su DNI/NIE");
        } while ((!calcularNIF(documento) || (documento == null));
        
        do{
            var direccion = prompt("Introduzca la direccion");
        } while ((direccion == undefined) || (direccion == "") || (direccion == null));
        
        do{
            var password = prompt("Introduzca una contraseña");
        } while ((password == undefined) || (password == "") || (password == null));
        
        //Con los datos obtenidos, creamos un objeto cliente nuevo, y mostramos las propiedades insertadas
        var cliente4 = new Cliente(nombre, apellido, documento, direccion, password);
        document.write(cliente4);
        
        //Optativo, creamos su cesta de la compra y lo mostramos
        var carro4 = new Cesta(cliente4, false);
        document.write(carro4);
    </script>
    
    <h2>Modificando y mostrando la cesta de la compra</h2>
    <script>
        //Eliminamos productos de las cestas
        carro1.delProducto(pipas);
        carro2.delProducto(lejia);
        
        //Añadimos un producto a una cesta
        carro3.addProducto(yogur);
        carro3.addProducto(chicharo);
        carro3.addProducto(yogur);
        
        //Mostramos los carros de la compra
        document.write(carro1);
        document.write(carro2);
        document.write(carro3);
    </script>

    <footer>DWEC - Tarea 3 - Felipe Rodríguez Gutiérrez - 2016/2017</footer>
</body>
</html>
